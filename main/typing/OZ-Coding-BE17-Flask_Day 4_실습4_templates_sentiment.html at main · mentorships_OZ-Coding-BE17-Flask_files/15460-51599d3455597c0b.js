performance.mark("js-parse-end:15460-51599d3455597c0b.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["15460"],{471(e,t,n){n.d(t,{_S:()=>o,cB:()=>l,cW:()=>i});var a=n(96551),r=n(95066);let o=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},i=e=>{(0,a.C3)({appId:e})},l=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};r.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:l()})},!0)},89495(e,t,n){n.d(t,{Z:()=>a});function a({appendQuery:e,retainScrollPosition:t,returnTarget:n}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:n}}))}},85970(e,t,n){n.d(t,{_:()=>r});var a=n(74848);function r({buttonFocusId:e,buttonHotkey:t,onButtonClick:n,buttonTestLabel:r,onlyAddHotkeyScopeButton:o}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{hidden:!0,"data-testid":r||"","data-hotkey":t,onClick:n,"data-hotkey-scope":e}),!o&&(0,a.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:n})]})}r.displayName="DuplicateOnKeydownButton"},12436(e,t,n){n.d(t,{Ak:()=>f,RF:()=>h,Wl:()=>m,aT:()=>g,cD:()=>p,fN:()=>u});var a=n(74848),r=n(9364),o=n(556),i=n(68439),l=n(98632),s=n(96540),c=n(55669);let d=(0,i.A)("localStorage"),u=(0,s.createContext)(void 0);u.displayName="OpenPanelStateContext";let m=(0,s.createContext)(()=>void 0);function p({children:e,payload:t,openPanelRef:n,action:i}){let p=(0,c.E)(),f="blame"in t,h=(0,r.H)(t),g=p?"blame"===i:f,x=p?"tree"===i:h,y=(0,s.useRef)(g),_=(0,s.useRef)(x);(0,s.useLayoutEffect)(()=>{y.current=g,_.current=x});let w=(0,o.i)(),v=(0,s.useRef)(void 0),[F,R]=(0,s.useState)(()=>{let e=d.getItem("codeNavOpen");if(!w&&""!==e&&null!==e||w&&t.symbolsExpanded)return"codeNav"}),b=(g||x)&&"codeNav"===F?void 0:F;s.useEffect(()=>{n.current=b},[b,n]);let T=(0,s.useCallback)((e,t)=>{R(n=>(n&&v.current&&v.current.focus(),v.current=t,y.current||_.current&&"codeNav"===e?void 0:e))},[]);return function(e){let{screenSize:t}=(0,l.lm)(),n=(0,s.useRef)(t);(0,s.useEffect)(()=>{let a=n.current>=l.Gy.large,r=n.current===t;t<l.Gy.large&&(a||r)&&e(void 0),n.current=t},[t,e])}(T),(0,a.jsx)(u,{value:b,children:(0,a.jsx)(m,{value:T,children:e})})}function f(){return{openPanel:(0,s.use)(u),setOpenPanel:(0,s.use)(m)}}function h(){return(0,s.use)(u)}function g(){return(0,s.use)(m)}m.displayName="OpenPanelDispatchContext",(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0}).displayName="OpenPanelContext",p.displayName="OpenPanelProvider"},62655(e,t,n){function a(e){return r(e)[0]}function r(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,r]=n.trim().split("=");e===a&&void 0!==r&&t.push({key:a,value:r})}return t}function o(e,t,n=null,a=!1,r="lax"){let i=document.domain;if(null==i)throw Error("Unable to get document domain");i.endsWith(".github.com")&&(i="github.com");let l="https:"===location.protocol?"; secure":"",s=n?`; expires=${n}`:"";!1===a&&(i=`.${i}`);try{document.cookie=`${e}=${t}; path=/; domain=${i}${s}${l}; samesite=${r}`}catch{}}function i(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let a=new Date(Date.now()-1).toUTCString(),r="https:"===location.protocol?"; secure":"",o=`; expires=${a}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${o}${r}`}catch{}}n.d(t,{OR:()=>r,Ri:()=>a,TV:()=>o,Yj:()=>i})},20874(e,t,n){n.d(t,{L:()=>s});var a=n(74848),r=n(16522),o=n(38621),i=n(26108),l=n(34164);n(96540);let s=e=>{let t,n,s,c=(0,r.c)(17),{ref:d,expanded:u,testid:m,ariaLabel:p,ariaControls:f,onToggleExpanded:h,alignment:g,dataHotkey:x,className:y,size:_,tooltipDirection:w,variant:v}=e,F=u?`collapse-${m}`:`expand-${m}`,R=u?"left"===g?o.SidebarExpandIcon:o.SidebarCollapseIcon:"left"===g?o.SidebarCollapseIcon:o.SidebarExpandIcon;c[0]!==h?(t=e=>{h(e)},c[0]=h,c[1]=t):t=c[1];let b=v??"invisible";return c[2]!==y?(n=(0,l.$)(y,"fgColor-muted"),c[2]=y,c[3]=n):n=c[3],c[4]!==f||c[5]!==p||c[6]!==x||c[7]!==u||c[8]!==d||c[9]!==_||c[10]!==F||c[11]!==R||c[12]!==t||c[13]!==b||c[14]!==n||c[15]!==w?(s=(0,a.jsx)(i.K,{"aria-label":p,tooltipDirection:w,ref:d,"data-testid":F,"aria-expanded":u,"aria-controls":f,icon:R,"data-hotkey":x,onClick:t,variant:b,size:_,className:n}),c[4]=f,c[5]=p,c[6]=x,c[7]=u,c[8]=d,c[9]=_,c[10]=F,c[11]=R,c[12]=t,c[13]=b,c[14]=n,c[15]=w,c[16]=s):s=c[16],s};s.displayName="ExpandButton",s.displayName="ExpandButton"},97955(e,t,n){n.d(t,{f:()=>r});var a=n(68695);async function r(e){let t=await (0,a.lS)(`${e}?noancestors=1`);if(!t.ok)throw Error(`Failed to fetch tree data: ${t.status} ${t.statusText}`);let n=await t.json();return"codeViewTreeRoute"in n.payload?{tree:{items:n.payload.codeViewTreeRoute.tree.items,totalCount:n.payload.codeViewTreeRoute.tree.totalCount}}:{tree:{items:n.payload.tree.items,totalCount:n.payload.tree.totalCount}}}},37198(e,t,n){n.d(t,{Uy:()=>z,H:()=>h,qn:()=>ey,c2:()=>ed,Nq:()=>M});var a=n(74848),r=n(16522),o=n(85970),i=n(18888),l=n(20874),s=n(35349),c=n(38621),d=n(21373),u=n(34164),m=n(96540);let p=e=>{let t,n,m,p,f,h,g=(0,r.c)(32),{ref:x,expanded:y,onToggleExpanded:_,className:w,ariaControls:v,textAreaId:F,useFilesButtonBreakpoint:R,variant:b,getTooltipDirection:T}=e,C=void 0===R||R,{toggleTreeShortcut:I}=(0,i.wk)(),{isServer:k}=(0,s.V)();g[0]!==y||g[1]!==T?(t=T?.(y)??"se",g[0]=y,g[1]=T,g[2]=t):t=g[2];let j=t;g[3]!==y||g[4]!==k||g[5]!==_||g[6]!==x||g[7]!==I.hotkey||g[8]!==C||g[9]!==b?(n=C&&(!y||k)&&(0,a.jsx)(d.Q,{"aria-label":"Expand file tree",leadingVisual:c.ArrowLeftIcon,"data-hotkey":I.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:x,onClick:_,variant:b??"invisible",className:"ExpandFileTreeButton-module__Button_1__UeSyAxq",children:"Files"}),g[3]=y,g[4]=k,g[5]=_,g[6]=x,g[7]=I.hotkey,g[8]=C,g[9]=b,g[10]=n):n=g[10];let N=I.hotkey,S=C&&(!y||k);g[11]!==w||g[12]!==S?(m=(0,u.$)(w,"position-relative","ExpandFileTreeButton-module__expandButton__rEZZsDe",{"ExpandFileTreeButton-module__filesButtonBreakpoint__A9ISuMX":S}),g[11]=w,g[12]=S,g[13]=m):m=g[13];let E=y?"Collapse file tree":"Expand file tree";return g[14]!==v||g[15]!==y||g[16]!==_||g[17]!==x||g[18]!==m||g[19]!==E||g[20]!==I.hotkey||g[21]!==j||g[22]!==b?(p=(0,a.jsx)(l.L,{dataHotkey:N,className:m,expanded:y,alignment:"left",ariaLabel:E,tooltipDirection:j,testid:"file-tree-button",ariaControls:v,ref:x,variant:b,onToggleExpanded:_}),g[14]=v,g[15]=y,g[16]=_,g[17]=x,g[18]=m,g[19]=E,g[20]=I.hotkey,g[21]=j,g[22]=b,g[23]=p):p=g[23],g[24]!==_||g[25]!==F||g[26]!==I.hotkey?(f=(0,a.jsx)(o._,{buttonFocusId:F,buttonHotkey:I.hotkey,onButtonClick:_,onlyAddHotkeyScopeButton:!0}),g[24]=_,g[25]=F,g[26]=I.hotkey,g[27]=f):f=g[27],g[28]!==n||g[29]!==p||g[30]!==f?(h=(0,a.jsxs)(a.Fragment,{children:[n,p,f]}),g[28]=n,g[29]=p,g[30]=f,g[31]=h):h=g[31],h};p.displayName="ExpandFileTreeButton",p.displayName="ExpandFileTreeButton";var f=n(77277);function h(e){let t,n,l=(0,r.c)(8),{inputRef:s,onFindFilesShortcut:c,textAreaId:d}=e,{sendRepoKeyDownEvent:u}=(0,f.T)(),{findFilesShortcut:m}=(0,i.wk)();return l[0]!==s||l[1]!==c||l[2]!==u?(t=()=>{c?.(),s?.current?.focus(),u("GO_TO_FILE")},l[0]=s,l[1]=c,l[2]=u,l[3]=t):t=l[3],l[4]!==m.hotkey||l[5]!==t||l[6]!==d?(n=(0,a.jsx)(o._,{buttonFocusId:d,buttonHotkey:m.hotkey,onButtonClick:t}),l[4]=m.hotkey,l[5]=t,l[6]=d,l[7]=n):n=l[7],n}h.displayName="FindFilesShortcut";var g=n(37013),x=n(89001),y=n(5642),_=n(68216),w=n(12436),v=n(65513),F=n(70516),R=n(49159),b=n(32764),T=n(91374),C=n(98632),I=n(79008),k=n(29941),j=n(47819),N=n(26108),S=n(87555),E=n(45721),P=n(10095),O=n(4723);let B=(0,m.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});B.displayName="FileTreeContext";var $=n(97955);let V="ReposFileTreePane-module__HideTree__os1Arl_",D="ReposFileTreePane-module__PaneContentsHiddenOnNarrow__iNRww3T";var A=n(82465),W=n(58632),G=n(8035),L=n(1703),U=n(58630),H=n(7478);let K=(0,m.createContext)({});function M(e){let t,n,o,i,l,s=(0,r.c)(6),{children:c}=e,d=(0,m.useRef)(!1),u=(0,m.useRef)(!1),p=(0,m.useRef)(!0);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{d.current=e},s[0]=t):t=s[0];let f=t;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{u.current=e},s[1]=n):n=s[1];let h=n;s[2]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{p.current=e},s[2]=o):o=s[2];let g=o;s[3]===Symbol.for("react.memo_cache_sentinel")?(i={expandAllFolders:d,refreshTree:u,shouldFetchFolders:p,setExpandAllFolders:f,setRefreshTree:h,setShouldFetchFolders:g},s[3]=i):i=s[3];let x=i;return s[4]!==c?(l=(0,a.jsx)(K,{value:x,children:c}),s[4]=c,s[5]=l):l=s[5],l}function z(){return(0,m.use)(K)}K.displayName="FileTreeControlContext",M.displayName="FileTreeControlProvider";var q=n(52870);function Z(e,t,n){let a=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),o=t.indexOf("/"),i=o>0?t.slice(0,o):t,l=`${e}/${i}`;if(n&&n.some(e=>e.path===l))continue;let s={items:[],data:{contentType:l===r?"file":"directory",name:i,path:l,isClientOnly:!0}};a.push(s)}return a}function Y(e,t,n){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let a=t.name.slice(0,t.name.lastIndexOf("/")),r=a.indexOf("/")>-1,o={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:a,hasSimplifiedPath:r},i={items:[e],data:o};return(n.set(o.path,i),r)?Y(i,{...o},n):i}function X(e,t,n,a){if(!e)return{newRootItems:n,rootItemsUpdated:!1};let r=!!e[""]&&Q("",t,n,e[""].items);for(let r of(a?.(n),Object.keys(e).sort()))if(r){let n=t.get(r);n&&(Q(r,t,n.items,e[r].items,a),n.data.totalCount=e[r].totalCount)}return{newRootItems:n,rootItemsUpdated:r}}function Q(e,t,n,a,r){let o=!1;for(let i of a){let a=e?`${e}/${i.name}`:i.name;if(!t.get(a)){let e={items:[],data:{...i}};if(t.set(a,e),i.hasSimplifiedPath){let a=Y(e,i,t),l=n.findIndex(e=>e.data.path===a.data.path);-1!==l?a.items.length>n[l].items.length&&(n[l]=a,o=!0):(n.push(a),r?.(n))}else n.push(e),r?.(n)}}return o}function J(e){let t,n,o,i,l,s,d,u,p,h,g,x,y=(0,r.c)(43),{isActive:_,file:w,onItemSelected:v,getItemUrl:F,selectedItemRef:R,navigate:b,onRenderRow:T,getFileTrailingVisual:C,getFileIcon:I}=e,{sendRepoClickEvent:k}=(0,f.T)(),j=m.useRef(null);y[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:j,mouseRowRef:j},y[0]=t):t=y[0];let N=(0,G.Z)(t),S="submodule"===w.data.contentType;y[1]!==w.data||y[2]!==C?(n=C?.(w.data),y[1]=w.data,y[2]=C,y[3]=n):n=y[3];let E=n;y[4]!==w.data||y[5]!==F||y[6]!==_||y[7]!==S||y[8]!==b||y[9]!==v||y[10]!==k?(o=e=>{S?(e.preventDefault(),w.data.submoduleUrl&&(window.location.href=w.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(F(w.data),"_blank"),e.preventDefault()):_?e.preventDefault():(v?.(),k("FILES_TREE.ITEM",{item_path:w.data.path}),b(F(w.data)),e.stopPropagation())},y[4]=w.data,y[5]=F,y[6]=_,y[7]=S,y[8]=b,y[9]=v,y[10]=k,y[11]=o):o=y[11];let P=o;T?.();let O=`${w.data.path}-item`,B=_?void 0:"auto 2rem";y[12]!==w.data||y[13]!==I||y[14]!==S?(i=I?I(w.data):S?(0,a.jsx)(c.FileSubmoduleIcon,{}):(0,a.jsx)(c.FileIcon,{}),y[12]=w.data,y[13]=I,y[14]=S,y[15]=i):i=y[15],y[16]!==i?(l=(0,a.jsx)(U.G.LeadingVisual,{children:i}),y[16]=i,y[17]=l):l=y[17];let $=S?"var(--fgColor-accent, var(--color-accent-fg))":void 0;return y[18]!==$?(s={color:$},y[18]=$,y[19]=s):s=y[19],y[20]!==w.data.name||y[21]!==R||y[22]!==s?(d=(0,a.jsx)("span",{ref:R,style:s,children:w.data.name}),y[20]=w.data.name,y[21]=R,y[22]=s,y[23]=d):d=y[23],y[24]!==w.data.name||y[25]!==N?(u=N&&(0,a.jsx)(W.m,{"data-testid":`${w.data.name}-item-tooltip`,id:`${w.data.name}-item-tooltip`,contentRef:j,"aria-label":w.data.name,open:!0,direction:"ne"}),y[24]=w.data.name,y[25]=N,y[26]=u):u=y[26],y[27]!==d||y[28]!==u?(p=(0,a.jsxs)(a.Fragment,{children:[d,u]}),y[27]=d,y[28]=u,y[29]=p):p=y[29],y[30]!==E?(h=!!E?.screenReaderText&&(0,a.jsx)("span",{className:"sr-only",children:E.screenReaderText}),y[30]=E,y[31]=h):h=y[31],y[32]!==E?(g=!!E?.trailingVisual&&(0,a.jsx)(U.G.TrailingVisual,{children:E.trailingVisual}),y[32]=E,y[33]=g):g=y[33],y[34]!==_||y[35]!==P||y[36]!==p||y[37]!==h||y[38]!==g||y[39]!==O||y[40]!==B||y[41]!==l?(x=(0,a.jsxs)(U.G.Item,{ref:j,onSelect:P,current:_,id:O,containIntrinsicSize:B,children:[l,p,h,g]}),y[34]=_,y[35]=P,y[36]=p,y[37]=h,y[38]=g,y[39]=O,y[40]=B,y[41]=l,y[42]=x):x=y[42],x}J.displayName="WrappedFileTreeRow";let ee=m.memo(J);function et({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:r,leadingPath:o="",onItemSelected:i,dispatchKnownFolders:l,getItemUrl:s,getFetchUrl:c,selectedItemRef:d,navigate:u,onRenderRow:p,getFileTrailingVisual:h,getFileIcon:g,navigateOnClick:x=!0,treeName:y}){let{expandAllFolders:_,shouldFetchFolders:w}=z(),[v,F]=(0,m.useState)(_?.current||r),{sendRepoClickEvent:R}=(0,f.T)(),b=m.useRef(null),T=m.useRef(null),C=(0,G.Z)({focusRowRef:T,mouseRowRef:b}),[I,k,j,N,S,E,P]=function(e,t,n){let[a,r]=m.useState(e.items),[o,i]=m.useState(e.data.totalCount||0),[l,s]=m.useState(!1),[c,d]=m.useState(!1),{safeSetTimeout:u}=(0,q.A)();m.useEffect(()=>{r(e.items)},[e.items]),m.useEffect(()=>{void 0!==e.data.totalCount&&i(e.data.totalCount)},[e.data.totalCount]);let p=m.useCallback(()=>{d(!1)},[]),f=m.useCallback((e,t)=>{let n=e||[...a];r(n.slice(0,100)),u(()=>{r(n),void 0!==t&&i(t)},1)},[a,u]);return[m.useCallback(async a=>{let o=new Map;if(e.data.isClientOnly){if(a){let n=Z(e.data.path,a);for(let e of n)o.set(e.data.path,e);t({type:"add",folders:o,processingTime:0}),n.length>100?f(n,n.length):(r(n),i(n.length))}}else{let l=n(e.data);d(!1),s(!0);let c=Date.now();try{let n=await (0,$.f)(l),s=n.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.tree.items.length};return(o.set(e.path,t),e.hasSimplifiedPath)?Y(t,e,o):t});if(a){let t=e.data.path,r=Z(t,a,n.tree.items);for(let e of(s.push(...r),r))o.set(e.data.path,e)}t({type:"add",folders:o,processingTime:Date.now()-c}),e.items=s,e.data.totalCount=n.tree.totalCount,s.length>100?f(s,n.tree.totalCount):(r(s),i(n.tree.totalCount))}catch{d(!0)}}s(!1)},[n,e,t,f]),f,a,l,c,p,o]}(t,l,c),O=P-j.length,B=o?`${o}/`:"";(0,m.useEffect)(()=>{_?.current&&!v&&F(!0)},[t,_,v]);let V=m.useCallback(a=>{_?.current&&(_.current=!1),a&&!v&&!N&&!S&&(t.items.length>100?k():0!==t.items.length||n||r||w?.current===!1||I(e)),a!==v&&F(a)},[_,v,N,S,t.items.length,n,r,w,k,I,e]),D=m.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&x?(window.open(s(t.data),"_blank"),e.preventDefault()):n?e.preventDefault():(i?.(),R("FILES_TREE.ITEM",{item_path:t.data.path}),x?u(s(t.data)):V?.(!v),e.stopPropagation())},[t.data,s,n,v,u,x,i,V,R]);m.useEffect(()=>{r&&!v&&V?.(!0)},[r]),m.useEffect(()=>{0===t.items.length&&v?V?.(!1):!v&&t.autoExpand&&V?.(!0)},[t.items.length]);let A=m.useCallback(e=>{d&&n&&d(e),b.current=e},[d,n]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,a.jsx)(er,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:B+t.data.name,inheritsActive:n,dispatchKnownFolders:l,onItemSelected:i,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:x,getFileTrailingVisual:h,getFileIcon:g,treeName:y}):(p?.(),(0,a.jsxs)(U.G.Item,{ref:T,expanded:v,onExpandedChange:V,current:n,onSelect:D,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,a.jsx)(U.G.LeadingVisual,{children:(0,a.jsx)(U.G.DirectoryIcon,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{ref:A,children:[B,t.data.name]}),C&&(0,a.jsx)(W.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:T,"aria-label":`${B}${t.data.name}`,open:!0,direction:"ne"})]}),(0,a.jsx)(U.G.SubTree,{state:N?"loading":S?"error":"done",children:S?(0,a.jsx)(U.G.ErrorDialog,{onRetry:I,onDismiss:E,children:"There was an error loading the folder contents."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(er,{clientOnlyFilePaths:e,directoryItems:j,dispatchKnownFolders:l,onItemSelected:i,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:x,getFileTrailingVisual:h,getFileIcon:g,treeName:y}),O>0&&(0,a.jsx)(ei,{message:`${O} entries not shown`})]})})]}))}ee.displayName="FileTreeRow",et.displayName="WrappedDirectoryTreeRow";let en=m.memo(et);function ea({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:r,onItemSelected:o,dispatchKnownFolders:i,selectedItemRef:l,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:d,getFileIcon:u,directoryNavigateOnClick:p=!0,treeName:f}){let h=(0,A.l)(),g=(0,v.Z)(),x=(0,L.Z)(),y=m.useRef(x);return(0,a.jsx)(a.Fragment,{children:t.map(t=>{let m=h===t.data.path,x=m||h.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,a.jsx)(en,{clientOnlyFilePaths:e,isActive:r||m,isAncestorOfActive:x,onItemSelected:o,leadingPath:n,directory:t,dispatchKnownFolders:i,getItemUrl:c,getFetchUrl:g.getItemUrl,selectedItemRef:x?l:void 0,navigate:y.current,onRenderRow:s,navigateOnClick:p,getFileTrailingVisual:d,getFileIcon:u,itemCount:t.items.length,treeName:f},t.data.name):(0,a.jsx)(ee,{onItemSelected:o,file:t,isActive:m,getItemUrl:c,selectedItemRef:m?l:void 0,navigate:y.current,onRenderRow:s,getFileTrailingVisual:d,getFileIcon:u,treeName:f},t.data.name)})})}en.displayName="DirectoryTreeRow",ea.displayName="WrappedDirectoryContents";let er=m.memo(ea);function eo(e){let{clientOnlyFilePaths:t,data:n,rootItems:r,setRootItems:o,fetchError:i,incompleteFileTree:l,processingTime:s,loading:c,onRenderRow:d,getItemUrl:p,getFileTrailingVisual:f,getFileIcon:h,sortDirectoryItems:g,treeName:x}=e,{knownFolders:y,dispatchKnownFolders:_}=(0,m.use)(B),{refreshTree:w}=z();m.useEffect(()=>{if(c)return;let e=new Map,t=[];w?.current||(e=new Map(y),t=r.slice());let{newRootItems:a,rootItemsUpdated:i}=X(n,e,t,g);(a.length>r.length||i||w?.current)&&o(a),(e.size>y.size||w?.current)&&_({type:"set",folders:e,processingTime:s}),w?.current&&(w.current=!1)},[n,c]);let v=m.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{onMouseDown:v,className:(0,u.$)(e.className,"ReposFileTreeView-module__Box__rY5iFZi"),"data-testid":"repos-file-tree-container",children:c?(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_1__HEpudcb",children:(0,a.jsx)(H.A,{"aria-label":"Loading file tree"})}):(0,a.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,a.jsxs)(U.G,{"aria-label":"Files",children:[i&&(0,a.jsx)(ei,{message:"Some files could not be loaded."}),l&&(0,a.jsx)(ei,{message:"Sign in to see the full file tree."}),(0,a.jsx)(er,{clientOnlyFilePaths:t,directoryItems:r,onItemSelected:e.onItemSelected,dispatchKnownFolders:_,selectedItemRef:e.selectedItemRef,onRenderRow:d,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:p,getFileTrailingVisual:f,getFileIcon:h,treeName:x})]})})})})}function ei(e){let t,n,o=(0,r.c)(3),{message:i}=e,l=i||"Couldn't load.";return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(U.G.LeadingVisual,{children:(0,a.jsx)(P.A,{icon:c.AlertFillIcon,className:"ReposFileTreeView-module__Octicon__bcxNpPv"})}),o[0]=t):t=o[0],o[1]!==l?(n=(0,a.jsxs)(U.G.Item,{id:"error-tree-row",children:[t,(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_2__Qxi_C9D",children:l})]}),o[1]=l,o[2]=n):n=o[2],n}er.displayName="DirectoryContents",eo.displayName="ReposFileTreeView",ei.displayName="ErrorTreeRow";var el=n(89495);function es(e){let t,n,l,s,d,m,p=(0,r.c)(18),{className:f,onClick:h,textAreaId:g}=e,{searchShortcut:x}=(0,i.wk)(),y=x.hotkey;return p[0]!==h?(t=e=>{h?.(),(0,el.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})},p[0]=h,p[1]=t):t=p[1],p[2]!==f?(n=(0,u.$)("SearchButton-module__IconButton__uGkXY5u",f),p[2]=f,p[3]=n):n=p[3],p[4]!==x.hotkey||p[5]!==t||p[6]!==n?(l=(0,a.jsx)(N.K,{"aria-label":"Search this repository",tooltipDirection:"nw",icon:c.SearchIcon,"data-hotkey":y,size:"medium",onClick:t,className:n}),p[4]=x.hotkey,p[5]=t,p[6]=n,p[7]=l):l=p[7],p[8]!==h||p[9]!==g?(s=()=>{let e=document.getElementById(g);h?.(),(0,el.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},p[8]=h,p[9]=g,p[10]=s):s=p[10],p[11]!==x.hotkey||p[12]!==s||p[13]!==g?(d=(0,a.jsx)(o._,{buttonFocusId:g,buttonHotkey:x.hotkey,onButtonClick:s,onlyAddHotkeyScopeButton:!0}),p[11]=x.hotkey,p[12]=s,p[13]=g,p[14]=d):d=p[14],p[15]!==l||p[16]!==d?(m=(0,a.jsxs)(a.Fragment,{children:[l,d]}),p[15]=l,p[16]=d,p[17]=m):m=p[17],m}es.displayName="SearchButton";let ec=C.Gy.xxxlarge;function ed({clientOnlyFilePaths:e,collapseTree:t,showTree:n,fileTree:r,treeToggleElement:o,treeToggleRef:i,onItemSelected:l,processingTime:d,searchBoxRef:p,repo:f,path:R,refInfo:A,isFilePath:W,foldersToFetch:G,incompleteFileTree:L,id:U,onFindFilesShortcut:H,textAreaId:K,getItemUrlOverride:M,headerClassName:z,paneClassName:q,paneContentsClassName:Z,treeContainerClassName:Y,findFileWorkerPath:Q,headerContent:J,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,showFindFile:ea=!0,directoryNavigateOnClick:er=!0,showRefSelectorRow:ei=!0,paneResizable:el=!0}){if(ea&&void 0===Q)throw Error("findFileWorkerPath must be provided when showFindFile is true");let ed=(0,w.RF)(),{canEdit:ep,fileExistsOnDefault:ef}=(0,y.M)(),[eh,eg]=m.useState(G.length>0),[ex,ey]=m.useState(!1),e_=m.useRef([]),ew=m.useRef(0),ev=m.useRef(null),eF=m.useRef(!1),eR=m.useRef(null),{query:eb}=(0,_.JS)(),eT=m.useRef(eb);eT.current=eb;let{codeCenterOption:eC}=(0,I.ud)(),eI=m.useRef(ed),{isServer:ek}=(0,s.V)(),{defaultBranch:ej}=(0,F.t)(),{getItemUrl:eN}=(0,v.Z)(),eS=M||eN,eE=[],eP=new Map,eO=m.useRef(eh);!eO.current&&r&&(eE=X(r,eP,[],en).newRootItems),eO.current=!0;let[eB,e$]=m.useReducer(eu,eP),[eV,eD]=m.useState(eE);m.useEffect(()=>{n&&(!eb||window.innerWidth>=C.Gy.large)||(eR.current=null)},[n,eb]),m.useEffect(()=>{ed&&eI.current!==ed&&window.innerWidth<ec&&t({setPreference:!1}),eI.current=ed},[t,ed]);let eA=m.useCallback(async e=>{let t=eN({contentType:"directory",path:e,name:e});try{let n=await (0,$.f)(t),a={items:n.tree.items,totalCount:n.tree.totalCount};r[e]=a}catch{ey(!0)}e_.current.push(e),ew.current-=1,0===ew.current&&eg(!1)},[r,eN]);m.useEffect(()=>{if(L)return void eg(!1);if(!G||0===G.length)return;let e=G.filter(e=>!e_.current.includes(e));if(e.length>0)for(let t of(ew.current+=e.length,eg(!0),e))eA(t)},[eA,G,L]);let eW=m.useCallback(e=>{n&&(!eT.current||window.innerWidth>=C.Gy.large)&&ev.current&&e&&(0,k.Rt)(e,ev.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[n]),eG=m.useCallback(e=>{e&&eF.current?eF.current=!1:eR.current!==e&&eW(e),eR.current=e},[eW]),eL=m.useCallback(e=>{ev.current=e,window.innerWidth>=ec&&eW(eR.current)},[eW]),eU=m.useCallback(e=>{e&&eW(eR.current)},[eW]),{screenSize:eH}=(0,C.lm)(),eK=!ek&&(ed&&eH<ec||eH<C.Gy.xlarge)&&eH>=C.Gy.large,eM=m.useCallback(()=>{eK||l(),eF.current=!0},[l,eK]),ez=W?R.substring(0,R.lastIndexOf("/")):R,eq=(0,m.useMemo)(()=>({knownFolders:eB,dispatchKnownFolders:e$}),[eB]),eZ=m.useMemo(()=>ek?null:(0,O.KF)(),[ek]),eY=m.useCallback(()=>{window.innerWidth>C.Gy.large&&window.innerWidth<C.Gy.xxxxlarge&&t({setPreference:!1})},[t]),eX=A.name===ej,eQ=(0,a.jsxs)("div",{id:U,className:(0,u.$)("ReposFileTreePane-module__PaneContents__UXFY2mG",ek&&D,Z),children:[(0,a.jsxs)("div",{className:(0,u.$)(z,"ReposFileTreePane-module__Box_1__Y8K4NoF"),children:[J,ei&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_2__vMQBXFB",children:[(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_3__Hls8HRm",children:eX||void 0===ef?(0,a.jsx)(x.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0}):(0,a.jsxs)(j.A,{className:"ReposFileTreePane-module__FullWidthButtonGroup__xvY3NwL",children:[ef?(0,a.jsx)(N.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",as:T.N,to:(0,b.IO9)({repo:f,commitish:ej,action:"blob",path:R})}):(0,a.jsx)(N.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",description:"File does not exist on default branch","aria-disabled":!0,inactive:!0}),(0,a.jsx)(x.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})]})}),(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_4__RNDhqfw",children:[ep&&(0,a.jsx)(N.K,{"aria-label":"Add file",tooltipDirection:"n",as:T.N,icon:c.PlusIcon,to:(0,b.IO9)({repo:f,path:ez,commitish:A.name,action:"new"}),onClick:eM,className:"ReposFileTreePane-module__IconButton__mpL2tLd"}),(0,a.jsx)(es,{className:ep?"ReposFileTreePane-module__SearchButtonWithLeftBorder__QOxYVO8":void 0,onClick:eY,textAreaId:K})]})]})]}),A.currentOid&&ea&&Q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.default,{commitOid:A.currentOid,findFileWorkerPath:Q,onItemSelected:l,searchBoxRef:p,className:(0,u.$)("ReposFileTreePane-module__FileResultsList__gHLS8F8",ek&&D)}),(0,a.jsx)(h,{inputRef:p,onFindFilesShortcut:H,textAreaId:K})]}),(0,a.jsx)(em,{scrollingRef:ev}),(0,a.jsxs)("div",{ref:eL,className:(0,u.$)("ReposFileTreePane-module__Box_5__sxoA1v3",ek&&D),children:[ek?A.currentOid&&(0,a.jsx)("div",{className:eb?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(eo,{clientOnlyFilePaths:e,data:r,rootItems:eV,selectedItemRef:eG,setRootItems:eD,onItemSelected:eM,processingTime:d,loading:eh,fetchError:ex,incompleteFileTree:L,directoryNavigateOnClick:er,getItemUrl:eS,className:Y,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,treeName:A.name})}):eZ&&(0,a.jsx)(O.bL,{node:eZ}),!A.currentOid&&!f.isEmpty&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_6__xTY5mUl",children:[(0,a.jsx)(P.A,{icon:c.AlertFillIcon}),"\xa0Ref is invalid"]})]})]});return(0,a.jsxs)(B,{value:eq,children:[eZ&&(0,a.jsx)(O.oj,{node:eZ,children:A.currentOid&&(0,a.jsx)("div",{className:eb?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(eo,{clientOnlyFilePaths:e,data:r,directoryNavigateOnClick:er,rootItems:eV,selectedItemRef:eG,setRootItems:eD,onItemSelected:eM,processingTime:d,loading:eh,fetchError:ex,incompleteFileTree:L,getItemUrl:eS,className:Y,getFileTrailingVisual:ee,getFileIcon:et,sortDirectoryItems:en,treeName:A.name})})}),!n&&eC.enabled&&o&&(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_7__RUUksMq",children:o}),(0,a.jsx)(S.O7.Pane,{position:"start",sticky:!0,padding:"none",width:"large",resizable:!!el,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"none",narrow:"none"},className:(0,u.$)("ReposFileTreePane-module__Pane__G6mCt9A",!n&&V,eK||ed?"ReposFileTreePane-module__HidePaneWithTreeOverlay__nxcY9jg":"ReposFileTreePane-module__HidePane__glpb72p",q),children:n&&!eK&&(0,a.jsx)("div",{className:ek?ed?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:eQ})}),n&&eK&&eI.current===ed&&(0,a.jsx)(E.Ay,{className:(0,u.$)(ek?ed?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,"ReposFileTreePane-module__Overlay__Zs4814J",!n&&V),ref:eU,returnFocusRef:i,onClickOutside:eY,onEscape:eY,top:0,position:"fixed",children:(0,a.jsx)(a.Fragment,{children:eQ})})]})}function eu(e,t){switch(t.type){case"set":{let n=e?.size>0;return(0,R.BI)("file-tree",{"fetch-count":n?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":n?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let n=new Map([...e,...t.folders]);return(0,R.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":n.size,"nav-type":"fetch","processing-time":t.processingTime}),n}default:throw Error(`Unknown action type: ${t.type}`)}}function em({scrollingRef:e}){let[t,n]=m.useState(e.current&&e.current.scrollTop>0);return m.useEffect(()=>{if(e.current){let t=e.current,a=()=>{t&&t.scrollTop>0?n(!0):n(!1)};return t.addEventListener("scroll",a),()=>{t.removeEventListener("scroll",a)}}},[e]),t?(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_8__XoRqKH0"}):null}ed.displayName="ReposFileTreePane",em.displayName="TreeBorder";var ep=n(47698),ef=n(62655),eh=n(556),eg=n(95066),ex=n(46249);function ey(e,t,n,r,o,i="fileTreeExpanded",l){let{sendRepoClickEvent:s}=(0,f.T)(),c=(0,eh.i)(),d=i?(0,ef.Ri)(i):void 0,u=void 0===eg.XC,h=!c&&d&&"false"!==d.value||c&&n;void 0===h&&(h=!1);let g=(0,m.useRef)(null),x=(0,m.useRef)(null),{screenSize:y}=(0,C.lm)(),[_,w]=(0,m.useState)(h),v=(0,m.useRef)(h),F=(0,m.useRef)(!1),R=(0,m.useRef)(!1),b=(0,m.useCallback)(()=>!(t.current&&window.innerWidth>=ec||!t.current&&window.innerWidth>=C.Gy.xlarge),[t]);(0,m.useLayoutEffect)(()=>{let e=b();e||(F.current=!1),w((0,ep.q)()&&y<C.Gy.large&&!R.current||(!e||F.current)&&(c&&_||!c&&d?.value!=="false"))},[F,d?.value,y,t,b,c]),(0,m.useLayoutEffect)(()=>{let e=!t.current&&window.innerWidth<C.Gy.xlarge,n=!t.current&&window.innerWidth>=C.Gy.xlarge;e&&v.current&&!(0,ep.q)()&&_&&w(!1),n&&v.current&&!_&&w(!0)},[t,y]),(0,m.useLayoutEffect)(()=>{let e=t.current&&window.innerWidth<ec,n=t.current&&window.innerWidth>=ec;e&&v.current&&!(0,ep.q)()&&_&&w(!1),n&&v.current&&!_&&w(!0)},[t]);let T=(0,m.useCallback)(e=>{if(w(!0),b()&&(F.current=!0),e?.setPreference&&(o?.(!0),v.current=!0,i)){let e=new Date(Date.now()+2592e6).toUTCString();(0,ef.TV)(i,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>g.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>x.current?.focus())},[i,2592e6,b,o]),I=(0,m.useCallback)(e=>{if(w(!1),F.current=!1,R.current=!0,e?.setPreference&&(o?.(!1),v.current=!1,i)){let e=new Date(Date.now()+2592e6).toUTCString();(0,ef.TV)(i,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>g.current?.focus())},[i,2592e6,o]),k=(0,m.useCallback)(e=>e&&window.innerWidth>=ec||!t.current&&window.innerWidth>=C.Gy.xlarge,[t]),j=(0,m.useMemo)(()=>(0,a.jsx)(ex.A,{as:"h2",className:"use-tree-pane-module__Heading__OiAv1P0",children:(0,a.jsx)(p,{expanded:_,ariaControls:e,onToggleExpanded:()=>{s(_?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),_?I({focus:"toggleButton",setPreference:k(t.current)}):T({focus:"toggleButton",setPreference:k(t.current)})},className:void 0!==d||_||u?void 0:"react-tree-toggle-button-with-indicator",ref:g,textAreaId:r,...l})}),[_,e,d,u,r,l,s,I,k,t,T]);return{isTreeExpanded:_,expandTree:T,collapseTree:I,treeToggleElement:j,treeToggleRef:g,searchBoxRef:x}}},9652(e,t,n){n.d(t,{G:()=>a});let a=e=>({})},79008(e,t,n){n.d(t,{T2:()=>c,cp:()=>f,ud:()=>g});var a=n(74848),r=n(16522),o=n(68439),i=n(96540);let l=(0,o.A)("localStorage"),s="codeView.codeFolding",c="codeView.codeWrapping",d="codeView.centerView",u="codeView.openSymbolsOnClick",m=new Map([[s,"Show code folding buttons"],[c,"Wrap lines"],[d,"Center content"],[u,"Open symbols on click"]]),p=(0,i.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}});p.displayName="CodeViewOptionsContext";let f=e=>{let t,n,o=(0,r.c)(8),{children:i}=e,l=h(s,!0),m=h(c,!1),f=h(d,!1),g=h(u,!0);o[0]!==f||o[1]!==l||o[2]!==m||o[3]!==g?(t={codeFoldingOption:l,codeWrappingOption:m,codeCenterOption:f,openSymbolsOption:g},o[0]=f,o[1]=l,o[2]=m,o[3]=g,o[4]=t):t=o[4];let x=t;return o[5]!==i||o[6]!==x?(n=(0,a.jsx)(p,{value:x,children:i}),o[5]=i,o[6]=x,o[7]=n):n=o[7],n};function h(e,t){let n,a,o,s,c=(0,r.c)(11);c[0]!==e?(n=l.getItem(e),c[0]=e,c[1]=n):n=c[1];let d=n;c[2]!==t||c[3]!==d?(a=()=>d?"true"===d:t,c[2]=t,c[3]=d,c[4]=a):a=c[4];let[u,p]=(0,i.useState)(a);c[5]!==e?(o=m.get(e)||"",c[5]=e,c[6]=o):o=c[6];let f=o;return c[7]!==u||c[8]!==f||c[9]!==e?(s={name:e,enabled:u,setEnabled:p,label:f},c[7]=u,c[8]=f,c[9]=e,c[10]=s):s=c[10],s}function g(){return(0,i.use)(p)}f.displayName="CodeViewOptionsProvider"}}]);
//# sourceMappingURL=15460-51599d3455597c0b-6f1b1aa6851569d4.js.map